{"version":3,"sources":["vue/vue-drag-uploader.js"],"names":["itemStates","NEW","UPLOADING","COMPLETED","FAIL","STOP","VueDragUploaderItem","template","data","state","progress","messages","error","props","item","Object","i","Number","initState","String","uploadUrl","created","mounted","upload","methods","uniqid","Date","valueOf","formData","FormData","append","file","$emit","$","post","url","contentType","processData","xhr","XMLHttpRequest","addEventListener","e","lengthComputable","loaded","total","done","res","thumb_url","fail","console","warn","responseJSON","message","always","deleteSelf","watch","VueDragUploader","components","items","uploadQueue","images","Array","maxFiles","placeholder","map","image","key","getKey","uploadState","length","splice","$el","event","stopPropagation","preventDefault","currentTarget","classList","add","remove","files","target","dataTransfer","uploadFiles","clickAdd","$input","document","createElement","setAttribute","dispatchEvent","MouseEvent","window","date","getTime","getMilliseconds","Math","random","prototype","forEach","call","checkFile","canUpload","reader","FileReader","id","title","alt","description","push","onload","result","readAsDataURL","types","indexOf","type","deleteItem","child","filter","uploadStart","Vue","set","uploadEnd","delete","uploadProgress","itemClick","$event","handler","deep","uploading","val","computed","keys","component"],"mappings":"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","file":"vue-drag-uploader.js","sourcesContent":["/**\n * Part of ke project.\n *\n * @copyright  Copyright (C) 2018 ${ORGANIZATION}.\n * @license    __LICENSE__\n */\n\n(() => {\n  const itemStates = {\n    NEW: 'new',\n    UPLOADING: 'uploading',\n    COMPLETED: 'completed',\n    FAIL: 'fail',\n    STOP: 'stop',\n  };\n\n  const VueDragUploaderItem = {\n    template: `\n<div class=\"vue-drag-uploader__item preview-img\"\n    @click=\"$emit('click', item, i, $event)\">\n    <slot name=\"item\" :item=\"item\">\n        <div class=\"preview-img__body\"\n            :style=\"{'background-image': 'url(' + (item.thumb_url || item.url) + ')'}\"></div>\n\n        <div class=\"preview-img__overlay\">\n          <span class=\"preview-img__remove-icon fa fa-times\"\n              @click.stop.prevent=\"deleteSelf()\"></span>\n          <slot name=\"extra\" :item=\"item\"></slot>\n        </div>\n\n        <div class=\"preview-img__progress\" v-if=\"state === 'uploading'\">\n            <div class=\"preview-img__progress-bar\"\n                :style=\"{width: (progress * 100) + '%'}\"\n            ></div>\n        </div>\n        <div class=\"preview-img__error-message error-message\" v-if=\"state === 'fail'\" @click.stop.prevent=\"\">\n            <span class=\"error-message__notice\">Upload fail</span>\n            <span class=\"error-message__message\">{{ messages.error }}</span>\n        </div>\n    </slot>\n</div>\n    `,\n    data() {\n      return {\n        state: itemStates.COMPLETED,\n        progress: 0,\n        messages: {\n          error: ''\n        }\n      }\n    },\n    props: {\n      item: Object,\n      i: Number,\n      initState: String,\n      uploadUrl: String\n    },\n    created() {\n      this.state = this.initState;\n\n      if (this.initState === itemStates.NEW) {\n\n      }\n    },\n    mounted() {\n      if (this.initState === itemStates.NEW) {\n        this.upload();\n      }\n    },\n    methods: {\n      upload() {\n        this.state = itemStates.UPLOADING;\n\n        const uniqid = new Date().valueOf();\n        const formData = new FormData();\n        formData.append('file', this.item.file);\n\n        this.$emit('upload-start', uniqid);\n\n        return $.post({\n            url: this.uploadUrl,\n            data: formData,\n            contentType: false,\n            processData: false,\n            xhr: () => {\n              const xhr = new XMLHttpRequest();\n\n              if(xhr.upload){\n                xhr.upload.addEventListener('progress', e => {\n                  if (e.lengthComputable) {\n                    this.progress = e.loaded / e.total;\n                    this.$emit('upload-progress', uniqid, this.progress);\n                  }\n                }, false);\n              }\n\n              return xhr;\n            },\n        })\n          .done(res => {\n            this.state = itemStates.COMPLETED;\n            this.item.url = res.data.url;\n            this.item.thumb_url = res.data.thumb_url || res.data.url;\n          })\n          .fail(xhr => {\n            console.warn(xhr.responseJSON.message, xhr);\n            this.state = itemStates.FAIL;\n            this.messages.error = xhr.responseJSON.message;\n          })\n          .always(() => {\n            this.item.file = null;\n\n            this.$emit('upload-end', uniqid);\n          });\n      },\n\n      deleteSelf() {\n        this.$emit('delete', this.item);\n      }\n    },\n    watch: {\n    }\n  };\n\n  const VueDragUploader = {\n    components: {\n      'vue-drag-uploader-item': VueDragUploaderItem\n    },\n    template: `\n<div class=\"vue-drag-uploader\">\n    <div class=\"vue-drag-uploader__wrapper\">\n        <slot name=\"items\" \n            :items=\"items\"\n            :url=\"url\"\n            :max-files=\"maxFiles\"\n            :files-limited=\"maxFiles\"\n        >\n            <draggable v-model=\"items\" class=\"vue-drag-uploader__draggable-wrapper\" \n                :options=\"{draggable: '.preview-img'}\">\n                <slot name=\"items\" :item=\"items\">\n                    <vue-drag-uploader-item\n                        v-for=\"(item, i) of items\"\n                        :item=\"item\"\n                        :i=\"i\"\n                        :init-state=\"item.uploadState\"\n                        :key=\"item.key\"\n                        :upload-url=\"url\"\n                        @delete=\"deleteItem\"\n                        @upload-start=\"uploadStart\"\n                        @upload-end=\"uploadEnd\"\n                        @upload-progress=\"uploadProgress\"\n                        @click=\"itemClick\"\n                        >\n                        <template slot=\"item\">\n                            <slot name=\"item\" \n                                :item=\"item\" \n                                :i=\"i\" \n                                :url=\"url\"\n                                :max-files=\"maxFiles\"\n                                :files-limited=\"maxFiles\"></slot>\n                        </template>\n                        <template slot=\"extra\">\n                            <slot name=\"extra\" \n                                :item=\"item\" \n                                :i=\"i\" \n                                :url=\"url\"\n                                :max-files=\"maxFiles\"\n                                :files-limited=\"maxFiles\"></slot>\n                        </template>\n                    </vue-drag-uploader-item>\n                </slot>\n                \n                <div v-if=\"canUpload\" class=\"vue-drag-uploader__item add-button\" :key=\"'empty'\"\n                    @click=\"clickAdd()\">\n                    <div class=\"add-button__body\">\n                        <div class=\"add-button__icon\">\n                            <span class=\"fa fa-upload fa-2x\"></span>\n                        </div>\n                        <div class=\"add-button__text\">\n                            {{ placeholder }}\n                        </div>\n                    </div>\n                </div>\n            </draggable>\n        </slot>\n    </div>\n</div>\n    `,\n    data() {\n      return {\n        items: [],\n        uploadQueue: {}\n      }\n    },\n    props: {\n      url: String,\n      images: Array,\n      maxFiles: [String, Number],\n      placeholder: String\n    },\n    created() {\n      this.images.map(image => {\n        image.key = image.key || this.getKey();\n        image.uploadState = itemStates.COMPLETED;\n      });\n\n      this.items = this.images;\n\n      if (this.maxFiles != null) {\n        if (this.maxFiles < this.items.length) {\n          this.items.splice(this.maxFiles);\n        }\n      }\n    },\n    mounted() {\n      this.$el.addEventListener('dragover', event => {\n        event.stopPropagation();\n        event.preventDefault();\n\n        event.currentTarget.classList.add('vue-drag-uploader--ondrag');\n      });\n\n      this.$el.addEventListener('dragleave', event => {\n        event.stopPropagation();\n        event.preventDefault();\n\n        event.currentTarget.classList.remove('vue-drag-uploader--ondrag');\n      });\n\n      // File drop\n      this.$el.addEventListener(\"drop\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n\n        event.currentTarget.classList.remove('vue-drag-uploader--ondrag');\n\n        const files = event.target.files || event.dataTransfer.files;\n\n        this.uploadFiles(files);\n      });\n    },\n    methods: {\n      clickAdd() {\n        const $input = document.createElement(\"INPUT\");\n        $input.setAttribute('type', 'file');\n\n        $input.addEventListener('change', event => {\n          const files = event.target.files || event.dataTransfer.files;\n\n          this.uploadFiles(files);\n        });\n\n        $input.dispatchEvent(new MouseEvent('click', {\n          'view': window,\n          'bubbles': true,\n          'cancelable': true\n        }));\n      },\n\n      getKey() {\n        const date = new Date();\n\n        return date.getTime() + '.' + date.getMilliseconds() + '.' + Math.random();\n      },\n\n      uploadFiles(files) {\n        Array.prototype.forEach.call(files, file => {\n          if (!this.checkFile(file)) {\n            return;\n          }\n\n          if (!this.canUpload) {\n            return;\n          }\n\n          const reader = new FileReader;\n          const url = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=';\n          const item = {\n            id: '',\n            key: this.getKey(),\n            url: '',\n            thumb_url: url,\n            uploadState: itemStates.NEW,\n            file: file,\n            title: '',\n            alt: '',\n            description: ''\n          };\n\n          this.items.push(item);\n\n          reader.onload = (event) => {\n            const url = event.target.result;\n\n            item.thumb_url = url;\n          };\n\n          reader.readAsDataURL(file);\n        });\n      },\n\n      checkFile: function(file) {\n        const types = [\n          'image/jpeg',\n          'image/png',\n          'image/gif'\n        ];\n\n        return types.indexOf(file.type) !== -1;\n      },\n\n      deleteItem(child) {\n        this.$emit('delete-item', child);\n\n        this.items = this.items.filter(item => item.key !== child.key);\n      },\n\n      uploadStart(uniqid) {\n        Vue.set(this.uploadQueue, uniqid, 0);\n      },\n\n      uploadEnd(uniqid) {\n        Vue.delete(this.uploadQueue, uniqid);\n      },\n\n      uploadProgress(uniqid, progress) {\n        this.uploadQueue[uniqid] = progress;\n      },\n\n      itemClick(item, i, $event) {\n        this.$emit('item-click', item, i, $event);\n      }\n    },\n    watch: {\n      images(images) {\n        images.map(image => {\n          image.key = image.key || this.getKey();\n        });\n\n        this.items = images;\n      },\n\n      items: {\n        handler(items) {\n          this.$emit('change', items);\n        },\n        deep: true\n      },\n\n      uploading(val) {\n        if (val) {\n          this.$emit('uploading');\n        } else {\n          this.$emit('uploaded');\n        }\n      }\n    },\n    computed: {\n      canUpload() {\n        return this.maxFiles == null || this.items.length < this.maxFiles;\n      },\n\n      uploading() {\n        Object.keys(this.uploadQueue);\n        return Object.keys(this.uploadQueue).length > 0;\n      }\n    }\n  };\n\n  Vue.component('vue-drag-uploader', VueDragUploader);\n})();\n"]}