"use strict";function ownKeys(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),e.push.apply(e,o)}return e}function _objectSpread(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(e),!0).forEach(function(t){_defineProperty(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function _defineProperty(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function _slicedToArray(n,t){return _arrayWithHoles(n)||_iterableToArrayLimit(n,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(n,t){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)){var e=[],o=!0,i=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done)&&(e.push(s.value),!t||e.length!==t);o=!0);}catch(n){i=!0,a=n}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return e}}function _arrayWithHoles(n){if(Array.isArray(n))return n}var LunaAddonMixin={data:function(){return{options:{},prepared:!1}},props:{value:Object},created:function(){var n=this.options;underscore.each(this.value,function(t,e){Vue.set(n,e,t)}),this.options=n},mounted:function(){var n=this;setTimeout(function(){n.prepared=!0},150)},methods:{},watch:{options:{handler:function(){this.$emit("change",this.options),this.$emit("input",this.options)},deep:!0}}};$(function(){Vue.component("addon-text",{template:"#addon-tmpl-text",mixins:[LunaAddonMixin],data:function(){return{options:{content:"大哉乾元，萬物資始，山風蠱，山火賁，先天而天弗違，風澤中孚，水地比利見大人，雷天大壯，堅冰至，風澤中孚，利永貞，元亨利貞，山天大畜天雷無妄，地澤臨，地山謙，履霜，水火既濟，水火既濟，利永貞聖人作，積善之家，六二之動，風地觀，山澤損，賢人在下，火山旅必有餘慶，山水蒙，同氣相求，厚德載物，天風姤，風天小畜，無咎無譽龍戰於野，雷水解，風從虎，天地否，地天泰，元亨利貞",content_font_size:{lg:"",md:"",xs:""},content_line_height:{lg:"",md:"",xs:""}}}}})}),$(function(){Vue.component("addon-feature",{template:"#addon-tmpl-feature",mixins:[LunaAddonMixin],data:function(){return{options:{link:"",link_element:"title",layout_type:"icon",image:"",icon:{name:"fa fa-star",border:{width:{lg:1,md:1,xs:1},color:"",style:"",radius:{lg:0,md:0,xs:0}},font_size:{lg:"",md:"",xs:""},color:"",bg_color:"",margin_top:{lg:"",md:"",xs:""},margin_bottom:{lg:"",md:"",xs:""},padding:{lg:"",md:"",xs:""}},content:"大哉乾元，萬物資始，山風蠱，山火賁，先天而天弗違，風澤中孚，水地比利見大人，雷天大壯，堅冰至，風澤中孚，利永貞，元亨利貞，山天大畜天雷無妄，地澤臨，地山謙，履霜，水火既濟，水火既濟，利永貞聖人作，積善之家，六二之動，風地觀，山澤損，賢人在下，火山旅必有餘慶，山水蒙，同氣相求，厚德載物，天風姤，風天小畜，無咎無譽龍戰於野，雷水解，風從虎，天地否，地天泰，元亨利貞",content_font_size:{lg:"",md:"",xs:""},content_line_height:{lg:"",md:"",xs:""}}}}})}),$(function(){Vue.component("addon-image",{template:"#addon-tmpl-image",mixins:[LunaAddonMixin],data:function(){return{options:{image:"",border_radius:"",alt:"",link:"",link_target:""}}}})}),$(function(){Vue.component("addon-button",{template:"#addon-tmpl-button",mixins:[LunaAddonMixin],data:function(){return{options:{text:"",link:"",link_target:"",style:"btn-primary",border_radius:"",size:"",block:!1,icon:"",icon_position:"left"}}}})}),$(function(){Vue.component("addon-emptyspace",{template:"#addon-tmpl-emptyspace",mixins:[LunaAddonMixin],data:function(){return{options:{height:{lg:"",md:"",xs:""}}}}})}),$(function(){Vue.component("single-image",{template:'\n<div class="c-single-image-uploader">\n    <div class="form-group c-single-image-preview text-center" v-if="url !== \'\' && !uploading">\n        <img :src="url" alt="Image" class="img-fluid rounded" style="max-height: 450px;">\n    </div>\n    \n    <div class="c-single-image-placeholder text-center p-4 mb-3 border rounded" v-if="url === \'\' && !uploading">\n        <small class="text-muted">拖拉圖片</small>\n    </div>\n    \n    <div class="form-group d-flex align-items-center" v-if="uploading" style="min-height: 450px;">\n        <img :src="loadingImage" class="mx-auto" alt="Loading">\n    </div>\n\n    <div class="form-group">\n        <div class="input-group">\n            <input :id="id" type="text"\n                v-model="url" class="form-control" :disabled="uploading" />\n            <div class="input-group-append">\n                <button type="button" class="btn btn-primary" @click="chooseFile()"\n                    :disabled="uploading">\n                    上傳圖片\n                </button>\n                <button v-if="url !== \'\'" type="button" class="btn btn-primary" @click="url = \'\'"\n                    :disabled="uploading">\n                    <span class="fa fa-times"></span>\n                </button>\n            </div>\n        </div>\n        <small class="form-text text-muted">\n            貼上圖片網址，或者上傳圖片，也可以將本地端圖片拖拉至此。\n        </small>\n    </div>\n</div>\n    ',data:function(){return{url:"",loadingImage:Phoenix.route("loading_image"),uploading:!1}},props:{value:String,id:String,accepted:{type:Array,default:function(){return["image/jpeg","image/png","image/gif"]}}},created:function(){this.url=this.value},mounted:function(){var n=this,t=$(this.$el);t.on("dragover",function(n){n.stopPropagation(),n.preventDefault(),t.addClass("c-single-image-uploader--hover")}),t.on("dragleave",function(n){n.stopPropagation(),n.preventDefault(),t.removeClass("c-single-image-uploader--hover")}),t.on("drop",function(e){e.stopPropagation(),e.preventDefault(),t.removeClass("c-single-image-uploader--hover");var o=e.originalEvent.target.files||e.originalEvent.dataTransfer.files;n.uploadFile(o[0])})},methods:{chooseFile:function(){var n=this,t=$('<input type="file">');t.on("change",function(t){var e=t.originalEvent.target.files||t.originalEvent.dataTransfer.files;n.uploadFile(e[0])}),t.click()},uploadFile:function(n){var t=this;if(this.checkFile(n)){var e=new FormData;e.append("file",n),this.uploading=!0,$.post({url:Phoenix.route("single_image_upload"),data:e,processData:!1,contentType:!1}).done(function(n){t.url=n.data.url}).fail(function(n){console.error(n.responseJSON.message),alert(n.responseJSON.message)}).always(function(){t.uploading=!1})}},checkFile:function(n){return!(this.accepted.indexOf(n.type)<0)||(alert("不允許的格式"),!1)}},watch:{value:function(){this.url=this.value},url:function(){this.$emit("change",this.url),this.$emit("input",this.url)}}})}),$(function(){Vue.component("title-options",{template:'\n<div class="c-title-options">\n    <div class="form-row">\n        <div class="col-6">\n            \x3c!-- Title Element --\x3e\n            <div class="form-group">\n                <label :for="id + \'title-element\'">\n                    標題元素\n                </label>\n                <select :id="id + \'title-element\'"\n                    v-model="options.title.element" class="form-control">\n                    <option v-for="i of [1, 2, 3, 4, 5, 6]" :value="\'h\' + i">\n                        h{{ i }}\n                    </option>\n                </select>\n            </div>\n        </div>\n        <div class="col-6">\n            \x3c!-- Title Color --\x3e\n            <div class="form-group">\n                <label :for="id + \'title-color\'">標題顏色</label>\n                <input :id="id + \'title-color\'" type="text"\n                    v-model.lazy="options.title.color" v-color class="form-control" />\n            </div>\n        </div>\n    </div>\n\n    <div class="form-row">\n        <div class="col-6">\n            \x3c!-- Title Font Size --\x3e\n            <rwd-group class-name="c-title-font-size">\n                <label slot="label">\n                    標題字體大小\n                </label>\n                <div v-for="size of [\'lg\', \'md\', \'xs\']" class="form-group" :slot="size"\n                    :class="\'c-title-font-size__\' + size">\n                    <div class="d-flex">\n                        <vue-slide-bar v-model="options.title.font_size[size]" class="flex-grow-1" :max="500"></vue-slide-bar>\n                        <input type="text" class="form-control ml-2 mt-2" style="width: 3.5rem;"\n                            v-model="options.title.font_size[size]" />\n                    </div>\n                </div>\n            </rwd-group>\n        </div>\n        <div class="col-6">\n            \x3c!-- Title Font Weight --\x3e\n            <div class="form-group">\n                <label>\n                    標題字體粗細\n                </label>\n                <div class="d-flex" v-if="prepared">\n                    <vue-slide-bar v-model="options.title.font_weight" class="flex-grow-1"\n                        :data="[\'\', 100, 150, 200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950, 1000]"\n                        :max="1000" :min="100"></vue-slide-bar>\n                    <input type="text" class="form-control ml-2 mt-2" style="width: 3.5rem;"\n                        v-model="options.title.font_weight" />\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="form-row">\n        <div class="col-6">\n            \x3c!-- Title Margin Top --\x3e\n            <rwd-group class-name="c-title-margin_top">\n                <label slot="label">\n                    標題上方間距 Margin Top\n                </label>\n                <div v-for="size of [\'lg\', \'md\', \'xs\']" class="form-group" :slot="size"\n                    :class="\'c-title-margin_top__\' + size">\n                    <input type="number" v-model="options.title.margin_top[size]" class="form-control" />\n                </div>\n            </rwd-group>\n        </div>\n        <div class="col-6">\n            \x3c!-- Title Margin Bottom --\x3e\n            <rwd-group class-name="c-title-margin_bottom">\n                <label slot="label">\n                    標題下方間距 Margin Bottom\n                </label>\n                <div v-for="size of [\'lg\', \'md\', \'xs\']" class="form-group" :slot="size"\n                    :class="\'c-title-margin_bottom__\' + size">\n                    <input type="number" v-model="options.title.margin_bottom[size]" class="form-control" />\n                </div>\n            </rwd-group>\n        </div>\n    </div>\n</div>\n    ',data:function(){return{options:{},prepared:!1}},props:{id:String,value:Object},created:function(){this.options=this.value},mounted:function(){var n=this;setTimeout(function(){n.prepared=!0},150)},methods:{},watch:{options:{handler:function(){this.$emit("change",this.options),this.$emit("input",this.options)},deep:!0}}})}),$(function(){Vue.component("animation-selector",{template:'\n<div class="cation-selector">\n    <div class="form-group">\n        <label :for="id + \'-name\'">動畫名稱</label>\n        <select :id="id + \'-name\'" class="form-control" v-model="animation.name">\n            <option value="">無</option>\n            <option v-for="anim of getAnimations()" :value="anim">\n                {{ anim }}\n            </option>\n        </select>\n    </div>\n    \n    <div class="form-group">\n        <label :for="id + \'-duration\'">動畫持續時間</label>\n        <input type="number" :id="id + \'-duration\'" class="form-control" v-model="animation.duration" min="0" />\n        <small class="form-text text-muted">\n            動畫的速度，單位: 微秒 (1/1000 秒)\n        </small>\n    </div>\n    \n    <div class="form-group">\n        <label :for="id + \'-delay\'">等待時間</label>\n        <input type="number" :id="id + \'-delay\'" class="form-control" v-model="animation.delay" min="0" />\n        <small class="form-text text-muted">\n            等待一定時間後才發生動畫，單位: 微秒 (1/1000 秒)\n        </small>\n    </div>\n</div>\n',data:function(){return{animation:{}}},props:{value:Object,id:String},mounted:function(){this.animation=this.value},methods:{getAnimations:function(){return["fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","flip","flipInX","flipInY","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","zoomIn","zoomInDown","zoomInLeft","zoomInRight","zoomInUp","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp"]}},watch:{animation:{handler:function(n){this.$emit("change",n),this.$emit("input",n)},deep:!0}}})}),$(function(){Vue.component("gradient",{template:'\n<div class="c-box-offset">\n    <div class="c-gradient-preview mb-3" style="height: 100px; border: 1px solid rgba(0, 0, 0, .2);" \n        :style="{\'background-image\': backgroundImage}">\n    </div>\n\n    <div class="form-row">\n        <div class="col-6">\n            <div class="form-group">\n                <label :for="id + \'-color1\'">顏色 1</label>\n                <input type="text" :id="id + \'-color1\'" v-model.lazy="gradient.start_color" v-color class="form-control" />\n            </div>\n            <div class="form-group">\n                <label :for="id + \'-color1-pos\'">顏色 1 位置</label>\n                <vue-slide-bar v-model="gradient.start_pos"></vue-slide-bar>\n            </div>\n        </div>\n        <div class="col-6">\n            <div class="form-group">\n                <label :for="id + \'-color2\'">顏色 2</label>\n                <input type="text" :id="id + \'-color2\'" v-model.lazy="gradient.end_color" v-color class="form-control" />\n            </div>\n            <div class="form-group">\n                <label :for="id + \'-color2-pos\'">顏色 2 位置</label>\n                <vue-slide-bar v-model="gradient.end_pos"></vue-slide-bar>\n            </div>\n        </div>\n    </div>\n\n    <div class="form-group">\n        <label :for="id + \'-type\'">漸層模式</label>\n        <select :id="id + \'-type\'" v-model.lazy="gradient.type" class="form-control">\n            <option value="linear">線性 Linear</option>\n            <option value="radial">放射 Radial</option>\n        </select>\n    </div>\n\n    <div class="form-group">\n        <label :for="id + \'-angle\'">角度</label>\n        <div class="d-flex">\n            <vue-slide-bar :id="id + \'-angle\'" class="flex-grow-1" v-model="gradient.angle" :max="360">\n            </vue-slide-bar>\n            <input type="text" class="form-control ml-2 mt-2" style="width: 3.5rem;"\n                v-model="gradient.angle" />\n        </div>\n    </div>\n</div>\n    ',data:function(){return{gradient:{type:"linear",angle:"0",start_color:"",start_pos:"0",end_color:"",end_pos:"100"}}},props:{id:String,value:Object},mounted:function(){this.gradient=this.value},methods:{updated:function(){this.$emit("change",this.gradient),this.$emit("input",this.gradient)}},watch:{gradient:{handler:function(n){this.$emit("change",this.gradient),this.$emit("input",this.gradient)},deep:!0}},computed:{backgroundImage:function(){var n=this.gradient;return"linear"===n.type?"".concat(n.type,"-gradient(").concat(n.angle,"deg, ").concat(n.start_color," ").concat(n.start_pos,"%, ")+"".concat(n.end_color," ").concat(n.end_pos,"%)"):"".concat(n.type,"-gradient(").concat(n.start_color," ").concat(n.start_pos,"%, ")+"".concat(n.end_color," ").concat(n.end_pos,"%)")}}})}),$(function(){Vue.component("rwd-group",{template:'\n<div class="form-group" :class="getClassName()">\n    <div class="d-flex" :class="getClassName(\'__title\')">\n        <div class="">\n                <slot name="label"></slot>\n        </div>\n        <div class="ml-auto" :class="getClassName(\'__rwd-control\')">\n            <a href="javascript://" :class="[currentSize === \'lg\' ? \'active\' : \'text-dark\']" @click="currentSize = \'lg\'">\n                <span class="fa fa-fw fa-desktop"></span>\n            </a>\n            <a href="javascript://" :class="[currentSize === \'md\' ? \'active\' : \'text-dark\']" @click="currentSize = \'md\'">\n                <span class="fas fa-fw fa-tablet"></span>\n            </a>\n            <a href="javascript://" :class="[currentSize === \'xs\' ? \'active\' : \'text-dark\']" @click="currentSize = \'xs\'">\n                <span class="fas fa-fw fa-mobile"></span>\n            </a>\n        </div>\n    </div>\n\n    <div :class="getClassName(\'__inputs\')">\n        <slot name="lg" v-if="currentSize === \'lg\'"></slot>\n        <slot name="md" v-if="currentSize === \'md\'"></slot>\n        <slot name="xs" v-if="currentSize === \'xs\'"></slot>\n    </div>\n\n    <slot name="description"></slot>\n</div>\n    ',data:function(){return{currentSize:""}},props:{name:String,className:{default:"c-rwd-group",type:String}},mounted:function(){var n=this;setTimeout(function(){n.currentSize="lg"},150)},methods:{getClassName:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.className+n}},watch:{}})}),$(function(){Vue.component("box-offset",{template:'\n<rwd-group class-name="c-box-offset">\n    <div slot="label" class="mb-3">\n        <slot name="label"></slot>\n        <a href="javascript://" @click="lock = !lock">\n            <span class="fa" :class="[lock ? \'fa-lock\' : \'fa-lock-open\']"></span>\n        </a>\n    </div>\n    <div v-for="size of [\'lg\', \'md\', \'xs\']" class="form-group" :slot="size" :class="\'c-box-offset__\' + size">\n        <div class="form-row">\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Top" v-model="offsets[size].top" />\n            </div>\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Right" v-model="offsets[size].right" />\n            </div>\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Bottom" v-model="offsets[size].bottom" />\n            </div>\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Left" v-model="offsets[size].left" />\n            </div>\n        </div>\n    </div>\n</rwd-group>\n\n    ',data:function(){return{offsets:{xs:{top:"",right:"",bottom:"",left:""},md:{top:"",right:"",bottom:"",left:""},lg:{top:"",right:"",bottom:"",left:""}},currentSize:"desktop",lock:!1}},props:{value:Object},mounted:function(){var n=this;this.extractValue(this.value),underscore.each(this.offsets,function(t,e){underscore.each(t,function(o,i){n.$watch("offsets.".concat(e,".").concat(i),function(e){n.lock&&(t.top=e,t.right=e,t.bottom=e,t.left=e);var o=n.getAllValues();n.$emit("change",o),n.$emit("input",o)})})})},methods:{getAllValues:function(){var n={};return underscore.each(this.offsets,function(t,e){n[e]="".concat(t.top,",").concat(t.right,",").concat(t.bottom,",").concat(t.left)}),n},extractValue:function(n){var t=this;underscore.each(n,function(n,e){var o=_slicedToArray(n.split(","),4),i=o[0],a=o[1],s=o[2],l=o[3];t.offsets[e].top=i||"",t.offsets[e].right=a||"",t.offsets[e].bottom=s||"",t.offsets[e].left=l||""})}},watch:{value:function(n){this.extractValue(n)}}})}),$(function(){Vue.component("radio-button",{template:'\n<button type="button" class="btn flex-fill" :data-value="value"\n    @click="select()"\n    :class="[active ? activeClass : \'btn-outline-secondary\']">\n    <slot></slot>\n</button>',data:function(){return{active:!1}},props:{value:String,activeClass:{default:"btn-success"}},mounted:function(){var n=this;this.active=this.$parent.value===this.value,this.$parent.$on("button-selected",function(t){n.active=t===n.value})},methods:{select:function(){this.$parent.$emit("button-selected",this.value)}}}),Vue.component("radio-buttons",{template:'\n<div class="btn-group">\n  <slot></slot>\n</div>\n    ',data:function(){return{}},props:{value:String},mounted:function(){var n=this;this.$on("button-selected",function(t){n.$emit("change",t),n.$emit("input",t)})},methods:{},watch:{value:function(n){this.$parent.$emit("button-selected",n)}}})}),$(function(){Vue.directive("tinymce",{inserted:function(n){tinymce.remove(),tinymce.init({target:n,height:350,plugins:["advlist autolink lists link image charmap print preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code fullscreen","insertdatetime media nonbreaking save table contextmenu directionality","emoticons template paste textcolor colorpicker textpattern imagetools"],images_upload_url:Phoenix.route("addon-text:image-upload-url"),images_upload_handler:function(t,e,o){var i,a,s=jQuery(n);s.trigger("image-upload-start"),(i=new XMLHttpRequest).withCredentials=!1,i.open("POST",Phoenix.route("addon-text:image-upload-url")),i.onload=function(){var n;return s.trigger("image-upload-complete"),200!==i.status?(o("HTTP Error: "+decodeURIComponent(i.statusText)),void s.trigger("image-upload-error")):(n=JSON.parse(i.responseText))&&"string"==typeof n.data.url?(e(n.data.url),void s.trigger("image-upload-success")):(o("Invalid JSON: "+i.responseText),console.error("Invalid JSON: "+i.responseText),void s.trigger("image-upload-error"))},(a=new FormData).append("file",t.blob(),t.filename()),i.send(a)},setup:function(t){t.on("change",function(){n.value=t.getContent(),n.dispatchEvent(new Event("change",{bubbles:!0})),n.dispatchEvent(new Event("input",{bubbles:!0}))})}})}})}),$(document).on("focusin",function(n){$(n.target).closest(".mce-window").length&&n.stopImmediatePropagation()}),$(function(){Vue.directive("color",{inserted:function(n){$(n).minicolors({control:"hue",position:"left",opacity:!0,format:"rgb",theme:"bootstrap",change:function(t){var e=new Event("change",{bubbles:!0});n.dispatchEvent(e)}})},update:function(n){$(n).trigger("keyup")}})}),$(function(){function n(n,t){var e=t.value||{};$(n).select2(e).on("select2:select",function(t){n.dispatchEvent(new Event("change",{target:t.target}))})}Vue.directive("select2",{inserted:n,componentUpdated:n})}),$(function(){Vue.filter("lang",function(n){for(var t,e=arguments.length,o=new Array(e>1?e-1:0),i=1;i<e;i++)o[i-1]=arguments[i];return(t=Phoenix).__.apply(t,[n].concat(o))})}),$(function(){Vue.filter("addonProp",function(n,t){return Phoenix.data("addons")[t][n]})}),$(function(){Phoenix.data("component:addon-edit",{name:"addon-edit",data:function(){return{values:{},sticky:!1}},props:{},created:function(){},methods:{edit:function(n){var t=JSON.parse(JSON.stringify(n));void 0===t.options&&Vue.set(t,"options",this.getAddonBasicOptions()),void 0===t.disabled&&Vue.set(t,"disabled",!1),this.dataMigration(t),this.values=t,$(this.$refs.generalTab).click(),$(this.$refs.modal).modal("show"),this.sticky=!0},save:function(){Phoenix.trigger("addon:save",JSON.parse(JSON.stringify(this.values))),this.values={},this.sticky=!1,$(this.$refs.modal).modal("hide")},close:function(){var n=this;$(this.$refs.modal).modal("hide"),setTimeout(function(){n.values={}},300),this.sticky=!1},getAddonBasicOptions:function(){return{html_class:"",label:"",title:{text:"",element:"h3",font_size:{lg:"",md:"",xs:""},font_weight:"",color:"",margin_top:{lg:"",md:"",xs:""},margin_bottom:{lg:"",md:"",xs:""}},align:"",padding:{xs:"",md:"",lg:""},margin:{xs:"",md:"",lg:""},custom_css:"",text_color:"",display:{xs:"d-block",md:"d-md-block",lg:"d-lg-block"},box_shadow:{enabled:0,color:"rgba(0, 0, 0, 1)",hoffset:0,voffset:0,blur:0,spread:0},border:{enabled:0,width:{lg:1,md:1,xs:1},color:"",style:"",radius:{lg:0,md:0,xs:0}},background:{type:"none",color:"",overlay:"",image:{url:"",repeat:"",position:"center center",attachment:"inherit",size:"cover"},gradient:{type:"liner",angle:"",start_color:"",start_pos:"",end_color:"",end_pos:""},video:{url:""}},animation:{name:"",duration:300,delay:0}}},dataMigration:function(n){"string"==typeof n.options.background.video&&(n.options.background.video={url:n.options.background.video}),console.log(n)}},watch:{},computed:{options:function(){return console.log(this.values),this.values.options}}})}),$(function(){Phoenix.data("component:addon",{name:"addon",template:"#addon-component-tmpl",data:function(){return{options:{}}},props:{content:Object,column:Object,index:Number},created:function(){this.options=this.content.options},methods:{edit:function(){Phoenix.trigger("addon:edit",this.content,this.column)},toggleDisabled:function(){this.content.disabled=!this.content.disabled},copy:function(){this.$emit("copy")},remove:function(){var n=this;Phoenix.confirm("確定要刪除嗎?").then(function(){return n.$emit("delete")})},addAddon:function(){Phoenix.trigger("addon:add",this.content)},deleteAddon:function(n){this.addons.splice(n,1)}},watch:{content:{handler:function(){this.options=this.content.options},deep:!0}},computed:{}})}),$(function(){Phoenix.data("component:column-edit",{name:"column-edit",data:function(){return{values:{},sticky:!1}},props:{},created:function(){},methods:{edit:function(n){this.values=JSON.parse(JSON.stringify(n)),$(this.$refs.generalTab).click(),$(this.$refs.modal).modal("show"),this.sticky=!0},save:function(){Phoenix.trigger("column:save",JSON.parse(JSON.stringify(this.values))),this.values={},this.sticky=!1,$(this.$refs.modal).modal("hide")},close:function(){var n=this;$(this.$refs.modal).modal("hide"),setTimeout(function(){n.values={}},300),this.sticky=!1},widthRange:function(){return underscore.range(1,13)}},watch:{},computed:{options:function(){return this.values.options}}})}),$(function(){Phoenix.data("component:column",{name:"column",template:"#column-component-tmpl",components:{addon:Phoenix.data("component:addon")},data:function(){return{content:{},drag:!1,widthMenuOpen:""}},props:{value:Object,index:Number,child:{type:Boolean,default:!1}},created:function(){var n=this;this.content=this.value,void 0===this.content.id&&underscore.each(this.getEmptyColumn(),function(t,e){Vue.set(n.content,e,t)})},methods:{edit:function(){Phoenix.trigger("column:edit",this.content)},copy:function(){this.$emit("copy")},toggleDisabled:function(){this.content.disabled=!this.content.disabled},remove:function(){var n=this;Phoenix.confirm("確定要刪除嗎?").then(function(){return n.$emit("delete")})},copyAddon:function(n,t){var e=JSON.parse(JSON.stringify(n));e.id="addon-"+Phoenix.uniqid(),this.addons.splice(t+1,0,e)},addAddon:function(){Phoenix.trigger("addon:add",this.content)},addNewRow:function(){this.content.addons.push({type:"row"})},deleteAddon:function(n){this.addons.splice(n,1)},widthRange:function(){return underscore.range(1,13)},getEmptyColumn:function(){return{id:"col-"+Phoenix.uniqid(),disabled:!1,addons:[],options:{html_class:"",align:"center",valign:"top",padding:{xs:"",md:"",lg:""},margin:{xs:"",md:"",lg:""},text_color:"",width:{xs:"",md:"",lg:this.child?"col-lg-6":"col-lg-3"},display:{xs:"d-block",md:"d-md-block",lg:"d-lg-block"},box_shadow:{enabled:0,color:"rgba(0, 0, 0, 1)",hoffset:0,voffset:0,blur:0,spread:0},border:{enabled:0,width:{lg:1,md:1,xs:1},color:"",style:"",radius:{lg:0,md:0,xs:0}},background:{type:"none",color:"",overlay:"",image:{url:"",repeat:"",position:"center center",attachment:"inherit",size:"cover"},gradient:{type:"liner",angle:"",start_color:"",start_pos:"",end_color:"",end_pos:""},video:""},animation:{name:"",duration:300,delay:0}}}}},watch:{},computed:{addons:function(){return this.content.addons},options:function(){return this.content.options},width:function(){return underscore.values(this.options.width).join(" ")}}})}),$(function(){Phoenix.data("component:row-edit",{name:"row-edit",data:function(){return{values:{},sticky:!1}},props:{},created:function(){},methods:{edit:function(n){this.values=JSON.parse(JSON.stringify(n)),$(this.$refs.generalTab).click(),$(this.$refs.modal).modal("show"),this.sticky=!0},save:function(){Phoenix.trigger("row:save",JSON.parse(JSON.stringify(this.values))),$(this.$refs.modal).modal("hide"),this.sticky=!1},close:function(){var n=this;$(this.$refs.modal).modal("hide"),this.sticky=!1,setTimeout(function(){n.values={}},300)}},watch:{},computed:{options:function(){return this.values.options}}})}),$(function(){Phoenix.data("component:row",{name:"row",template:"#row-component-tmpl",components:{column:Phoenix.data("component:column")},data:function(){return{content:{},drag:!1}},props:{value:Object,child:{type:Boolean,default:!1},moveHandle:{type:String,default:"move-handle"}},created:function(){var n=this;this.content=this.value,void 0===this.content.id&&underscore.each(this.getEmptyRow(),function(t,e){Vue.set(n.content,e,t)})},methods:{addNewColumn:function(){this.content.columns.push({foo:Phoenix.uniqid()})},copy:function(){this.$emit("copy")},copyColumn:function(n,t){(n=JSON.parse(JSON.stringify(n))).id="col-"+Phoenix.uniqid(),n.addons=this.handleCopyAddons(n.addons),this.columns.splice(t+1,0,n)},handleCopyAddons:function(n){var t=this;return n.map(function(n){return"row"!==n.type?(n.id="addon-"+Phoenix.uniqid(),n):(n.id="row-"+Phoenix.uniqid(),n.columns=n.columns.map(function(n){return n.id="col-"+Phoenix.uniqid(),n.addons=t.handleCopyAddons(n.addons),n}),n)})},edit:function(){Phoenix.trigger("row:edit",this.content)},toggleDisabled:function(){this.content.disabled=!this.content.disabled},remove:function(){var n=this;Phoenix.confirm("確定要刪除嗎?").then(function(){return n.$emit("delete")})},getEmptyRow:function(){return{id:"row-"+Phoenix.uniqid(),disabled:!1,options:{label:"",title:{text:"",element:"h3",font_size:{lg:"",md:"",xs:""},font_weight:"",color:"",margin_top:{lg:"",md:"",xs:""},margin_bottom:{lg:"",md:"",xs:""}},subtitle:{text:"",font_size:{lg:"",md:"",xs:""}},html_id:"",html_class:"",title_align:"center",valign:"top",fluid_row:!1,no_gutter:!1,padding:{lg:"",md:"",xs:""},margin:{lg:"",md:"",xs:""},display:{lg:"d-lg-block",md:"d-md-block",xs:"d-block"},text_color:"",background:{type:"none",color:"",overlay:"",image:{url:"",repeat:"",position:"center center",attachment:"inherit",size:"cover"},gradient:{type:"liner",angle:"",start_color:"",start_pos:"",end_color:"",end_pos:""},video:{url:""},parallax:!1},animation:{name:"",duration:300,delay:0}},columns:[]}},deleteColumn:function(n){this.columns.splice(n,1)}},watch:{columns:{handler:function(){this.$emit("columns-change",{columns:this.columns})},deep:!0}},computed:{columns:function(){return this.content.columns},options:function(){return this.content.options}}}),Vue.component("row",Phoenix.data("component:row"))}),$(function(){new Vue({el:"#page-builder",data:{content:Phoenix.data("builder-content")||[],drag:!1,editing:{column:{},row:{},addon:{}}},components:{row:Phoenix.data("component:row"),"row-edit":Phoenix.data("component:row-edit"),column:Phoenix.data("component:column"),"column-edit":Phoenix.data("component:column-edit"),addon:Phoenix.data("component:addon"),"addon-edit":Phoenix.data("component:addon-edit")},mounted:function(){var n=this;Phoenix.on("row:edit",function(t,e){n.editing.row=t,n.editing.column=t,n.$refs.rowEdit.edit(t)}),Phoenix.on("row:save",function(t){underscore.each(t,function(t,e){n.editing.row[e]=t}),n.editing.column={},n.editing.row={}}),Phoenix.on("column:edit",function(t){n.editing.column=t,n.$refs.columnEdit.edit(t)}),Phoenix.on("column:save",function(t){underscore.each(t,function(t,e){n.editing.column[e]=t}),n.editing.column={}}),Phoenix.on("addon:add",function(t){n.editing.column=t,$(n.$refs.addonList).modal("show")}),Phoenix.on("addon:edit",function(t,e){n.editing.addon=t,n.editing.column=e,n.$refs.addonEdit.edit(t)}),Phoenix.on("addon:save",function(t){0===n.editing.column.addons.filter(function(n){return n.id===t.id}).length&&n.editing.column.addons.push(t),underscore.each(t,function(t,e){n.editing.addon[e]=t}),n.editing.column={},n.editing.addon={}})},methods:{addNewRow:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=n?this.content.splice(n+1,0,{}):this.content.push({})},deleteRow:function(n){this.content.splice(n,1)},copyRow:function(n,t){(n=JSON.parse(JSON.stringify(n))).id="row-"+Phoenix.uniqid(),n.columns=this.handleCopyColumns(n.columns),this.content.splice(t+1,0,n)},handleCopyColumns:function(n){var t=this;return n.map(function(n){return n.id="col-"+Phoenix.uniqid(),n.addons=t.handleCopyAddons(n.addons),n})},handleCopyAddons:function(n){var t=this;return n.map(function(n){return"row"!==n.type?(n.id="addon-"+Phoenix.uniqid(),n):(n.id="row-"+Phoenix.uniqid(),n.columns=n.columns.map(function(n){return n.id="col-"+Phoenix.uniqid(),n.addons=t.handleCopyAddons(n.addons),n}),n)})},columnsChange:function(n,t){n.columns=t.columns},selectAddon:function(n){var t=this;$(this.$refs.addonList).modal("hide");var e=Phoenix.data("addons")[n];setTimeout(function(){Phoenix.trigger("addon:edit",_objectSpread({},e,{id:"addon-"+Phoenix.uniqid(),is:"addon"}),t.editing.column),$("body").addClass("modal-open")},365)},getEmptyRow:function(){return{id:"row-"+Phoenix.uniqid(),options:{label:"",title:{text:"",element:"h3",font_size:{lg:"",md:"",xs:""},font_weight:"",color:"",margin_top:{lg:"",md:"",xs:""},margin_bottom:{lg:"",md:"",xs:""}},subtitle:{text:"",font_size:{lg:"",md:"",xs:""}},html_id:"",html_class:"",title_align:"center",valign:"top",fluid_row:!1,no_gutter:!1,padding:{xl:"",md:"",xs:""},margin:{xl:"",md:"",xs:""},display:{xs:"d-block",md:"d-md-block",lg:"d-lg-block"},text_color:"",background:{type:"none",color:"",image:{url:"",overlay:"",repeat:"",position:"center center",attachment:"inherit",size:"cover"},gradient:{type:"liner",angle:"",start_color:"",start_pos:"",end_color:"",end_pos:""},video:{url:"",overlay:""},parallax:!1},animation:{name:"",duration:300,delay:0}},columns:[]}},getSaveValue:function(){return JSON.stringify(this.content)}},watch:{},computed:{}})});