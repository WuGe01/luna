"use strict";var _slicedToArray=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var e=[],o=!0,i=!1,s=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(e.push(a.value),!n||e.length!==n);o=!0);}catch(t){i=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return e}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$(function(){Vue.component("gradient",{template:'\n<div class="c-box-offset">\n    <div class="c-gradient-preview mb-3" style="height: 100px; border: 1px solid rgba(0, 0, 0, .2);" \n        :style="{\'background-image\': backgroundImage}">\n    </div>\n\n    <div class="form-row">\n        <div class="col-6">\n            <div class="form-group">\n                <label :for="id + \'-color1\'">顏色 1</label>\n                <input type="text" :id="id + \'-color1\'" v-model.lazy="gradient.start_color" v-color class="form-control" />\n            </div>\n            <div class="form-group">\n                <label :for="id + \'-color1-pos\'">顏色 1 位置</label>\n                <vue-slide-bar v-model="gradient.start_pos"></vue-slide-bar>\n            </div>\n        </div>\n        <div class="col-6">\n            <div class="form-group">\n                <label :for="id + \'-color2\'">顏色 2</label>\n                <input type="text" :id="id + \'-color2\'" v-model.lazy="gradient.end_color" v-color class="form-control" />\n            </div>\n            <div class="form-group">\n                <label :for="id + \'-color2-pos\'">顏色 2 位置</label>\n                <vue-slide-bar v-model="gradient.end_pos"></vue-slide-bar>\n            </div>\n        </div>\n    </div>\n\n    <div class="form-group">\n        <label :for="id + \'-type\'">漸層模式</label>\n        <select :id="id + \'-type\'" v-model.lazy="gradient.type" class="form-control">\n            <option value="linear">線性 Linear</option>\n            <option value="radial">放射 Radial</option>\n        </select>\n    </div>\n\n    <div class="form-group">\n        <label :for="id + \'-angle\'">角度</label>\n        <vue-slide-bar :id="id + \'-angle\'" v-model="gradient.angle" :max="360">\n        </vue-slide-bar>\n    </div>\n</div>\n    ',data:function(){return{gradient:{type:"linear",angle:"0",start_color:"",start_pos:"0",end_color:"",end_pos:"100"}}},props:{id:String,value:Object},mounted:function(){},methods:{updated:function(){this.$emit("change",this.gradient),this.$emit("input",this.gradient)}},watch:{gradient:{handler:function(t){this.$emit("change",this.gradient),this.$emit("input",this.gradient)},deep:!0}},computed:{backgroundImage:function(){var t=this.gradient;return"linear"===t.type?t.type+"-gradient("+t.angle+"deg, "+t.start_color+" "+t.start_pos+"%, "+t.end_color+" "+t.end_pos+"%)":t.type+"-gradient("+t.start_color+" "+t.start_pos+"%, "+t.end_color+" "+t.end_pos+"%)"}}})}),$(function(){Vue.component("rwd-group",{template:'\n<div class="form-group" :class="getClassName()">\n    <div class="d-flex" :class="getClassName(\'__title\')">\n        <div class="">\n                <slot name="label"></slot>\n        </div>\n        <div class="ml-auto" :class="getClassName(\'__rwd-control\')">\n            <a href="javascript://" :class="[currentSize === \'lg\' ? \'active\' : \'text-dark\']" @click="currentSize = \'lg\'">\n                <span class="fa fa-fw fa-desktop"></span>\n            </a>\n            <a href="javascript://" :class="[currentSize === \'md\' ? \'active\' : \'text-dark\']" @click="currentSize = \'md\'">\n                <span class="fas fa-fw fa-tablet"></span>\n            </a>\n            <a href="javascript://" :class="[currentSize === \'xs\' ? \'active\' : \'text-dark\']" @click="currentSize = \'xs\'">\n                <span class="fas fa-fw fa-mobile"></span>\n            </a>\n        </div>\n    </div>\n\n    <div :class="getClassName(\'__inputs\')">\n        <slot name="lg" v-if="currentSize === \'lg\'"></slot>\n        <slot name="md" v-if="currentSize === \'md\'"></slot>\n        <slot name="xs" v-if="currentSize === \'xs\'"></slot>\n    </div>\n\n    <slot name="description"></slot>\n</div>\n    ',data:function(){return{currentSize:""}},props:{name:String,className:{default:"c-rwd-group",type:String}},mounted:function(){var t=this;setTimeout(function(){t.currentSize="lg"},150)},methods:{getClassName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.className+t}},watch:{}})}),$(function(){Vue.component("box-offset",{template:'\n<rwd-group class-name="c-box-offset">\n    <div slot="label" class="mb-3">\n        <slot name="label"></slot>\n        <a href="javascript://" @click="lock = !lock">\n            <span class="fa" :class="[lock ? \'fa-lock\' : \'fa-lock-open\']"></span>\n        </a>\n    </div>\n    <div v-for="size of [\'lg\', \'md\', \'xs\']" class="form-group" :slot="size" :class="\'c-box-offset__\' + size">\n        <div class="form-row">\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Top" v-model="offsets[size].top" />\n            </div>\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Right" v-model="offsets[size].right" />\n            </div>\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Bottom" v-model="offsets[size].bottom" />\n            </div>\n            <div class="col-3">\n                <input type="text" class="form-control" placeholder="Left" v-model="offsets[size].left" />\n            </div>\n        </div>\n    </div>\n</rwd-group>\n\n    ',data:function(){return{offsets:{xs:{top:"",right:"",bottom:"",left:""},md:{top:"",right:"",bottom:"",left:""},lg:{top:"",right:"",bottom:"",left:""}},currentSize:"desktop",lock:!1}},props:{value:Object},mounted:function(){var t=this;underscore.each(this.offsets,function(n,e){underscore.each(n,function(o,i){t.$watch("offsets."+e+"."+i,function(e){t.lock&&(n.top=e,n.right=e,n.bottom=e,n.left=e);var o=t.getAllValues();t.$emit("change",o),t.$emit("input",o)})})})},methods:{getAllValues:function(){var t={};return underscore.each(this.offsets,function(n,e){t[e]=n.top+" "+n.right+" "+n.bottom+" "+n.left}),t}},watch:{value:function(t){var n=this;console.log(t),underscore.each(t,function(t,e){console.log(e);var o=t.split(" "),i=_slicedToArray(o,4),s=i[0],a=i[1],l=i[2],r=i[3];n.offsets[e].top=s,n.offsets[e].right=a,n.offsets[e].bottom=l,n.offsets[e].left=r})}}})}),$(function(){Vue.component("radio-button",{template:'\n<button type="button" class="btn flex-fill" :data-value="value"\n    @click="select()"\n    :class="[active ? activeClass : \'btn-outline-secondary\']">\n    <slot></slot>\n</button>',data:function(){return{active:!1}},props:{value:String,activeClass:{default:"btn-success"}},mounted:function(){var t=this;this.active=this.$parent.value===this.value,this.$parent.$on("button-selected",function(n){t.active=n===t.value})},methods:{select:function(){this.$parent.$emit("button-selected",this.value)}}}),Vue.component("radio-buttons",{template:'\n<div class="btn-group">\n  <slot></slot>\n</div>\n    ',data:function(){return{}},props:{value:String},mounted:function(){var t=this;this.$on("button-selected",function(n){t.$emit("change",n),t.$emit("input",n)})},methods:{},watch:{value:function(t){this.$parent.$emit("button-selected",t)}}})}),$(function(){Vue.directive("color",{inserted:function(t){$(t).minicolors({control:"hue",position:"left",opacity:!0,format:"rgb",theme:"bootstrap",change:function(n){var e=new Event("change",{bubbles:!0});t.dispatchEvent(e)}})},update:function(t){$(t).trigger("keyup")}})}),$(function(){Phoenix.data("component:column-edit",{name:"column-edit",data:function(){return{values:{}}},props:{},created:function(){},methods:{edit:function(t){this.values=JSON.parse(JSON.stringify(t)),$(this.$refs.generalTab).click(),$(this.$refs.modal).modal("show")},save:function(){$(this.$refs.modal).modal("hide")},close:function(){this.values={},$(this.$refs.modal).modal("hide")}},watch:{},computed:{options:function(){return this.values.options}}})}),$(function(){Phoenix.data("component:column",{name:"column",template:"#column-component-tmpl",data:function(){return{addons:[],options:{}}},props:{content:Object,index:Number},created:function(){this.addons=this.content.addons,this.options=this.content.options},methods:{edit:function(){Phoenix.trigger("column:edit",this.content)},disable:function(){},remove:function(){this.$emit("delete")}},watch:{},computed:{}})}),$(function(){Phoenix.data("component:row",{name:"row",template:"#row-component-tmpl",components:{column:Phoenix.data("component:column")},data:function(){return{columns:[],options:{},drag:!1}},props:{content:Object},created:function(){this.columns=this.content.columns,this.options=this.content.options},methods:{addNewColumn:function(){this.columns.push(this.getEmptyColumn())},getEmptyColumn:function(){return{id:"col-"+Phoenix.uniqid(),addons:[],options:{html_class:"",align:"center",valign:"top",padding:{xs:"",md:"",lg:""},margin:{xs:"",md:"",lg:""},text_color:"",width:{xs:"col-3",md:"col-md-3",lg:"col-lg-3"},box_shadow:{enabled:0,color:"rgba(0, 0, 0, 1)",hoffset:0,voffset:0,blur:0,spread:0},border:{enabled:0,width:{lg:1,md:1,xs:1},color:"",style:"",radius:{lg:0,md:0,xs:0}},background:{type:"none",color:"",image:{url:"",overlay:"",repeat:"",position:"center center",attachment:"inherit",size:"cover"},gradient:{type:"liner",angle:"",start_color:"",start_pos:"",end_color:"",end_pos:""},video:""},animation:{name:"",duration:300,delay:0}}}},getColumnWidth:function(t){return underscore.values(t.width).join(" ")},deleteColumn:function(t){this.columns.splice(t,1)}},watch:{columns:{handler:function(){this.$emit("columns-change",{columns:this.columns})},deep:!0}},computed:{}})}),$(function(){new Vue({el:"#page-builder",data:{content:Phoenix.data("builder-content")||[],drag:!1},components:{row:Phoenix.data("component:row"),column:Phoenix.data("component:column"),"column-edit":Phoenix.data("component:column-edit")},mounted:function(){var t=this;Phoenix.on("column:edit",function(n){t.$refs.columnEdit.edit(n)})},methods:{addNewRow:function(){this.content.push(this.getEmptyRow())},columnsChange:function(t,n){t.columns=n.columns},getEmptyRow:function(){return{id:"row-"+Phoenix.uniqid(),options:{label:"",title:{text:"",element:"h3",font_size:{lg:"",md:"",xs:""},font_weight:"",color:"",margin:""},subtitle:{text:"",font_size:{lg:"",md:"",xs:""}},html_id:"",html_class:"",align:"center",valign:"top",fluid_row:!1,no_gutter:!1,padding:"100px 0 100px 0",margin:"0",text_color:"",background:{color:"",image:"",gradient:"",video:""},animation:{name:"",duration:300,delay:0}},columns:[]}},getSaveValue:function(){return JSON.stringify(this.content)}},watch:{},computed:{}})});